import{r as c,j as e,b as R}from"./react-Dz_EzexD.js";import{a as O}from"./react-dom-CL5kis7E.js";import{B as C,T as E,a as B,C as w,M,b as P,S as A,A as L,c as N,d as I,e as F}from"./@mui-material-D5ND7TaT.js";import{R as z,a as y,N as H,B as k}from"./react-router-BHeON6lH.js";import"./commonjsHelpers-CqkleIqs.js";import"./scheduler-BNqrtbQi.js";import"./@mui-system-DLOKj_dz.js";import"./@mui-styled-engine-R5kWChYQ.js";import"./@emotion-Dh4ycuzE.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./@babel-B4YMtfbM.js";import"./stylis-DDa9OTMq.js";import"./clsx-B-dksMZM.js";import"./@mui-utils-B0N8Tipa.js";import"./react-is-60rj3oqD.js";import"./@mui-private-theming--UJdPcU1.js";import"./react-transition-group-7gH4uRGu.js";import"./cookie--_YQFYBD.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();const D="/assets/react-CHdo91hT.svg",W="/vite.svg";function _(){const[a,i]=c.useState(""),s=c.useRef(null),[u,t]=c.useState(null),[r,d]=c.useState(null),[h,x]=c.useState(!1),[g,f]=c.useState(null),T=[{label:"Rephrase",value:"rephrase"},{label:"Summarize",value:"summarize"},{label:"Expand",value:"expand"}],b=o=>{if(s.current){const n=s.current,l=n.selectionStart,p=n.selectionEnd;a.substring(l,p)&&(d({start:l,end:p}),t(o.currentTarget))}},v=async o=>{if(r){const{start:n,end:l}=r,p=a.substring(n,l);t(null),x(!0);try{const m=await fetch("api/post/aipoweredtext",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:p,action:o})});if(!m.ok)throw new Error("Failed to fetch");const j=(await m.json()).message||p,S=a.substring(0,n)+j+a.substring(l);i(S),setTimeout(()=>{s.current&&(s.current.focus(),s.current.setSelectionRange(n,n+j.length))},0)}catch(m){console.error("API Error:",m),f(`Failed to ${o} text. Please try again.`),setTimeout(()=>{s.current&&(s.current.focus(),s.current.setSelectionRange(n,l))},5)}finally{x(!1)}}};return e.jsxs(C,{sx:{width:"100%",maxWidth:"800px",margin:"auto",mt:4},children:[e.jsxs("div",{children:[e.jsx("a",{target:"_blank",children:e.jsx("img",{src:W,className:"logo",alt:"Vite logo"})}),e.jsx("a",{target:"_blank",children:e.jsx("img",{src:D,className:"logo react",alt:"React logo"})})]}),e.jsx(E,{fullWidth:!0,multiline:!0,variant:"outlined",value:a,onChange:o=>i(o.target.value),inputRef:s,placeholder:"This is an editable paragraph. Type your sentences, select text and choose an action.",sx:{fontSize:"1.2rem","& .MuiInputBase-root":{padding:"16px"},"& .MuiOutlinedInput-input":{userSelect:"text"}}}),e.jsx(B,{variant:"contained",color:"primary",onClick:b,sx:{mt:2},disabled:h,children:h?e.jsx(w,{size:24,color:"inherit"}):"Select Action"}),e.jsx(M,{anchorEl:u,open:!!u,onClose:()=>t(null),children:T.map(o=>e.jsx(P,{onClick:()=>v(o.value),children:o.label},o.value))}),e.jsx(A,{open:!!g,autoHideDuration:3e3,onClose:()=>f(null),children:e.jsx(L,{severity:"error",onClose:()=>f(null),children:g})})]})}const $=()=>e.jsxs(z,{children:[e.jsx(y,{path:"/",element:e.jsx(_,{})}),e.jsx(y,{path:"*",element:e.jsx(H,{to:"/",replace:!0})})]});function q(){return e.jsx(k,{children:e.jsx($,{})})}const J=N({palette:{primary:{main:"#42a5f5"},secondary:{light:"#0066ff",main:"#ce93d8",contrastText:"#ffcc00"},contrastThreshold:3,tonalOffset:.2,mode:"dark"}});O.createRoot(document.getElementById("root")).render(e.jsx(R.StrictMode,{children:e.jsx(I,{theme:J,children:e.jsx(F,{children:e.jsx(q,{})})})}));
